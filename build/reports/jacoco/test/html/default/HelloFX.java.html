<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="zh"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>HelloFX.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">assg1</a> &gt; <a href="index.source.html" class="el_package">default</a> &gt; <span class="el_source">HelloFX.java</span></div><h1>HelloFX.java</h1><pre class="source lang-java linenums">
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.paint.Color;
import javafx.scene.text.Font;
import javafx.scene.text.FontPosture;
import javafx.scene.text.FontWeight;
import javafx.scene.text.Text;
import javafx.stage.Stage;
import javafx.scene.Group;

import java.util.*;


<span class="nc" id="L18">public class HelloFX extends Application{</span>

    boolean status;//indicate user or admin
<span class="nc" id="L21">    public ArrayList&lt;String&gt; date_curs = new ArrayList&lt;&gt;();//2022-9-1,cn,us,jp,.....</span>
<span class="nc" id="L22">    public HashMap&lt;String, ArrayList&lt;String&gt;&gt; cur_values = new HashMap&lt;&gt;();// aud,1.0,2.0,...</span>
    public ChoiceBox cb;
    public ChoiceBox cb2;
<span class="nc" id="L25">    public Alert a = new Alert(null);</span>

<span class="nc" id="L27">    public RateWriter rw = new RateWriter();</span>

<span class="nc" id="L29">    public String alert_add = &quot;Incorrect number of inputed rate! Please make sure you inputted rates for all other currencies!&quot; +</span>
            &quot; (Separate by space)&quot;;

<span class="nc" id="L32">    double[] row0 = {0.0,0.0,0.0,0.0};</span>
<span class="nc" id="L33">    double[] row1 = {0.0,0.0,0.0,0.0};</span>
<span class="nc" id="L34">    double[] row2 = {0.0,0.0,0.0,0.0};</span>
<span class="nc" id="L35">    double[] row3 = {0.0,0.0,0.0,0.0};</span>

<span class="nc" id="L37">    String[] arrow0 = {&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;};</span>
<span class="nc" id="L38">    String[] arrow1 = {&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;};</span>
<span class="nc" id="L39">    String[] arrow2 = {&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;};</span>
<span class="nc" id="L40">    String[] arrow3 = {&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;};</span>

    @Override
    public void start(Stage primaryStage) {
        // First canvas

        //Background image of login page
<span class="nc" id="L47">        Image image =  new Image(&quot;file:login.jpg&quot;);</span>
<span class="nc" id="L48">        ImageView mv = new ImageView(image);</span>
<span class="nc" id="L49">        load_csv_info();</span>
<span class="nc" id="L50">        Group root = new Group();</span>
<span class="nc" id="L51">        Scene scene = new Scene(root, 300,300);</span>

<span class="nc" id="L53">        primaryStage.setScene(scene);</span>
<span class="nc" id="L54">        primaryStage.setResizable(false);</span>
<span class="nc" id="L55">        primaryStage.setTitle(&quot;Login&quot;);</span>

        //Font for first two buttons
<span class="nc" id="L58">        Font firstTwo_font = Font.font(&quot;Courier New&quot;, FontWeight.BOLD, 20);</span>

        //Admin icon
<span class="nc" id="L61">        Image admin_icon =  new Image(&quot;file:admin.png&quot;);</span>
<span class="nc" id="L62">        ImageView ad_i = new ImageView(admin_icon);</span>

        //text label
<span class="nc" id="L65">        Font login_font = Font.font(&quot;verdana&quot;, FontWeight.BOLD, FontPosture.REGULAR, 25);</span>
<span class="nc" id="L66">        Text login_text = create_text(43,80,&quot;Please login as :&quot;,login_font,root,Color.GOLD);</span>

        //Admin Button
<span class="nc" id="L69">        Button admin_button = create_button(120,25,100,190,</span>
                &quot;Admin&quot;, firstTwo_font,ad_i);
<span class="nc" id="L71">        admin_button.setOnAction(actionEvent -&gt; {</span>
<span class="nc" id="L72">            enter_admin_action(primaryStage);</span>
<span class="nc" id="L73">        });</span>

        //User's icon
<span class="nc" id="L76">        Image user_icon =  new Image(&quot;file:user.png&quot;);</span>
<span class="nc" id="L77">        ImageView us_i = new ImageView(user_icon);</span>

        //User Buttton
<span class="nc" id="L80">        Button user_button = create_button(100,25,106,120,</span>
                &quot;User&quot;, firstTwo_font,us_i);
<span class="nc" id="L82">        user_button.setOnAction(actionEvent -&gt; {</span>
<span class="nc" id="L83">            enter_user_action(primaryStage);</span>
<span class="nc" id="L84">        });</span>

<span class="nc" id="L86">        root.getChildren().addAll(mv,admin_button,user_button,login_text);</span>
        //SHOW
<span class="nc" id="L88">        primaryStage.show();</span>
<span class="nc" id="L89">    }</span>

    public void load_csv_info(){
<span class="nc" id="L92">        HashMap&lt;String, HashMap&lt;String, String&gt;&gt; list =  readfile.fileInfor(&quot;src/main/resources/InitialExchangeRate.csv&quot;);</span>
        //System.out.println(list);
<span class="nc" id="L94">        ArrayList&lt;String&gt; keys = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L95" title="All 2 branches missed.">        for (int i = 0; i&lt; list.size();i++){</span>
            //keys.add(list.get[])
        }
<span class="nc bnc" id="L98" title="All 2 branches missed.">        for (String s: list.keySet()){</span>
<span class="nc" id="L99">            ArrayList&lt;String&gt; values = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L100">            date_curs.add(s);</span>
<span class="nc bnc" id="L101" title="All 2 branches missed.">            for (String s2 :list.get(s).keySet()){</span>
<span class="nc" id="L102">                values.add(list.get(s).get(s2));</span>
<span class="nc" id="L103">            }</span>
<span class="nc" id="L104">            cur_values.put(s,values);</span>
<span class="nc" id="L105">        }</span>
<span class="nc" id="L106">        date_curs.add(0,&quot;-&quot;);</span>

<span class="nc" id="L108">        RateWriter rw = new RateWriter();</span>
<span class="nc" id="L109">        rw.setRateCurc(cur_values);</span>
<span class="nc" id="L110">        rw.setCurcList(date_curs);</span>
        try{
<span class="nc" id="L112">            rw.rateWriter();</span>
<span class="nc" id="L113">        }catch (Exception e){</span>
<span class="nc" id="L114">            e.printStackTrace();</span>
<span class="nc" id="L115">        }</span>


<span class="nc" id="L118">    }</span>
    public Button create_button(double width,double height, double x, double y,
                                String text, Font font, ImageView img){

<span class="nc" id="L122">        Button but = new Button(text,img);</span>
<span class="nc" id="L123">        but.setMaxSize(width,height);</span>
<span class="nc" id="L124">        but.setText(text);</span>
<span class="nc bnc" id="L125" title="All 2 branches missed.">        if (font != null)</span>
<span class="nc" id="L126">            but.setFont(font);</span>
<span class="nc" id="L127">        but.setLayoutX(x);</span>
<span class="nc" id="L128">        but.setLayoutY(y);</span>
<span class="nc" id="L129">        return but;</span>
    }
    public TextField create_textfield(double x, double y, double width, double height, Font font, Group gp){
<span class="nc" id="L132">        TextField tf = new TextField ();</span>
<span class="nc bnc" id="L133" title="All 2 branches missed.">        if (font != null)</span>
<span class="nc" id="L134">            tf.setFont(font);</span>
<span class="nc" id="L135">        tf.setLayoutX(x);</span>
<span class="nc" id="L136">        tf.setLayoutY(y);</span>
<span class="nc" id="L137">        tf.setMaxSize(width,height);</span>
<span class="nc" id="L138">        gp.getChildren().add(tf);</span>
<span class="nc" id="L139">        return tf;</span>
    }

    public Text create_text(double x, double y, String s, Font font, Group gp, Color c){
<span class="nc" id="L143">        Text text = new Text();</span>
<span class="nc" id="L144">        text.setText(s);</span>
<span class="nc" id="L145">        text.setX(x);</span>
<span class="nc" id="L146">        text.setY(y);</span>
<span class="nc" id="L147">        text.setFont(font);</span>
<span class="nc" id="L148">        text.setFill(c);</span>
<span class="nc" id="L149">        return text;</span>
    }
    public RadioButton create_radiobutton(double x,double y, String s,Font font, Color c){
<span class="nc" id="L152">        RadioButton rb = new RadioButton(s);</span>
<span class="nc" id="L153">        rb.setFont(font);</span>
<span class="nc" id="L154">        rb.setTextFill(c);</span>
<span class="nc" id="L155">        rb.setLayoutX(x);</span>
<span class="nc" id="L156">        rb.setLayoutY(y);</span>
<span class="nc" id="L157">        return rb;</span>
    }
    public ChoiceBox&lt;String&gt; create_choicebox(double x, double y, double width , double height, Group gp){
<span class="nc" id="L160">        ChoiceBox&lt;String&gt; cb = new ChoiceBox&lt;&gt;();</span>
<span class="nc" id="L161">        cb.setMinWidth(width);</span>
<span class="nc" id="L162">        cb.setMinHeight(height);</span>
<span class="nc" id="L163">        cb.setLayoutX(x);</span>
<span class="nc" id="L164">        cb.setLayoutY(y);</span>

<span class="nc" id="L166">        gp.getChildren().add(cb);</span>
<span class="nc" id="L167">        return cb;</span>
    }
    public void enter_admin_action(Stage stage){
<span class="nc" id="L170">        System.out.println(&quot;Admin Received clicks&quot;);</span>
<span class="nc" id="L171">        status = true;</span>
<span class="nc" id="L172">        invoke_main_platform();</span>
        //stage.close();
<span class="nc" id="L174">    }</span>
    public void enter_user_action(Stage stage){
<span class="nc" id="L176">        System.out.println(&quot;User Received clicks&quot;);</span>
<span class="nc" id="L177">        status = false;</span>
<span class="nc" id="L178">        invoke_main_platform();</span>
        //stage.close();
<span class="nc" id="L180">    }</span>

    public void invoke_main_platform(){
<span class="nc" id="L183">        Stage stage_main = new Stage();</span>

<span class="nc" id="L185">        Image image =  new Image(&quot;file:background.jpg&quot;);</span>
<span class="nc" id="L186">        ImageView bg = new ImageView(image);</span>

<span class="nc" id="L188">        Group root2 = new Group();</span>
<span class="nc" id="L189">        root2.getChildren().add(bg);</span>
<span class="nc" id="L190">        Scene scene_main = new Scene(root2, 1200,600);</span>
<span class="nc" id="L191">        stage_main.setScene(scene_main);</span>
<span class="nc" id="L192">        stage_main.setResizable(false);</span>
<span class="nc" id="L193">        stage_main.setTitle(&quot;Currency converter&quot;);</span>

<span class="nc" id="L195">        Font login_font = Font.font(&quot;verdana&quot;, FontWeight.BOLD, FontPosture.REGULAR, 25);</span>
<span class="nc" id="L196">        Font firstTwo_font = Font.font(&quot;Arial&quot;, FontWeight.BOLD, 23);</span>


        // left choice box
<span class="nc" id="L200">        cb = create_choicebox(366,285,100,40,root2);</span>
        //load items
            //Currency types!
<span class="nc" id="L203">        Set list = readfile.fileInfor(&quot;src/main/resources/InitialExchangeRate.csv&quot;).keySet();</span>
<span class="nc bnc" id="L204" title="All 2 branches missed.">        for (Object s: list)</span>
<span class="nc" id="L205">            cb.getItems().addAll((String) s);</span>
        //left text box
<span class="nc" id="L207">        TextField left_hbox = create_textfield(133,285,120,70,firstTwo_font,root2);</span>
        //right choice box
<span class="nc" id="L209">        cb2 = create_choicebox(1200-133-100,285,100,40,root2);</span>
        //load items
<span class="nc bnc" id="L211" title="All 2 branches missed.">        for (Object s: list)</span>
<span class="nc" id="L212">            cb2.getItems().addAll((String) s);</span>
        //right text box
<span class="nc" id="L214">        TextField right_hbox = create_textfield(1200-366-100,285,120,70,firstTwo_font,root2);</span>
        //disable it
<span class="nc" id="L216">        right_hbox.setDisable(true);</span>

<span class="nc" id="L218">        cb.setOnAction(event -&gt; {</span>
<span class="nc" id="L219">        });</span>

        //convert Button
<span class="nc" id="L222">        Button convert_button = create_button(120,25,540,390,</span>
                &quot;Convert&quot;, firstTwo_font, null);
<span class="nc" id="L224">        convert_button.setOnAction(actionEvent -&gt; {</span>
<span class="nc" id="L225">            System.out.println();</span>
<span class="nc" id="L226">            right_hbox.setText(Converter.convertCurrency(Double.valueOf(left_hbox.getText()),(String)cb.getValue(),(String)cb2.getValue(),&quot;src/main/resources/InitialExchangeRate.csv&quot;));</span>

<span class="nc" id="L228">        });</span>
<span class="nc" id="L229">        root2.getChildren().add(convert_button);</span>

        //Table button
<span class="nc" id="L232">        Button table_button = create_button(210,25,20,540,</span>
                &quot;Display Table&quot;, firstTwo_font, null);
<span class="nc" id="L234">        table_button.setOnAction(actionEvent -&gt; {</span>
<span class="nc" id="L235">            invoke_table();</span>
<span class="nc" id="L236">        });</span>
<span class="nc" id="L237">        root2.getChildren().add(table_button);</span>

        //rate history button
<span class="nc" id="L240">        Button history_button = create_button(210,25,230,540,</span>
                &quot;Rate History&quot;, firstTwo_font, null);
<span class="nc" id="L242">        history_button.setOnAction(actionEvent -&gt; {</span>
<span class="nc" id="L243">            invoke_history();</span>
<span class="nc" id="L244">        });</span>
<span class="nc" id="L245">        root2.getChildren().add(history_button);</span>
        //Admin tools button

<span class="nc" id="L248">        Button tools_button = create_button(213,25,1200-225,540,</span>
                &quot;Update currency&quot;, firstTwo_font, null);
<span class="nc" id="L250">        tools_button.setOnAction(actionEvent -&gt; {</span>
<span class="nc" id="L251">            invoke_update();</span>
<span class="nc" id="L252">        });</span>
        //invoke setPop
<span class="nc" id="L254">        Button setPop_button = create_button(213,25,1200-420,540,</span>
                &quot;Set Popular&quot;, firstTwo_font, null);
<span class="nc" id="L256">        setPop_button.setOnAction(actionEvent -&gt; {</span>
<span class="nc" id="L257">            invoke_update1();</span>
<span class="nc" id="L258">        });</span>

<span class="nc bnc" id="L260" title="All 2 branches missed.">        if (status){</span>
<span class="nc" id="L261">            root2.getChildren().add(tools_button);</span>
        }

<span class="nc bnc" id="L264" title="All 2 branches missed.">        if (status){</span>
<span class="nc" id="L265">            root2.getChildren().add(setPop_button);</span>
        }
<span class="nc" id="L267">        stage_main.show();</span>
<span class="nc" id="L268">    }</span>

    public void invoke_table(){
<span class="nc" id="L271">        Group table_root = new Group();</span>
<span class="nc" id="L272">        Stage table_stage = new Stage();</span>
<span class="nc" id="L273">        Scene table_scene= new Scene(table_root, 500,500);</span>
<span class="nc" id="L274">        table_stage.setScene(table_scene);</span>
<span class="nc" id="L275">        table_stage.setResizable(false);</span>
<span class="nc" id="L276">        table_stage.setTitle(&quot;Popular currencies&quot;);</span>

<span class="nc" id="L278">        Image image =  new Image(&quot;file:table_bg.jpg&quot;);</span>
<span class="nc" id="L279">        ImageView bg = new ImageView(image);</span>
<span class="nc" id="L280">        table_root.getChildren().add(bg);</span>
        /*
        Button edit_pop = create_button(40,30,460,470,&quot;Edit&quot;,null,null);
        table_root.getChildren().add(edit_pop);
        edit_pop.setOnAction(event -&gt; {
            Group sub_root = new Group();
            Stage sub_stage = new Stage();
            Scene sub_scene= new Scene(sub_root, 500,80);
            sub_stage.setScene(sub_scene);
            sub_stage.setResizable(false);
            sub_stage.show();
        });*/

<span class="nc" id="L293">        ArrayList&lt;String&gt; currencies = new ArrayList&lt;&gt;();</span>
        //SHOULD BE LOADED FROM DATABASE
<span class="nc" id="L295">        currencies.add(readfile.popularCurrency(&quot;src/main/resources/PopularCurrencies.csv&quot;).get(0));</span>
<span class="nc" id="L296">        currencies.add(readfile.popularCurrency(&quot;src/main/resources/PopularCurrencies.csv&quot;).get(1));</span>
<span class="nc" id="L297">        currencies.add(readfile.popularCurrency(&quot;src/main/resources/PopularCurrencies.csv&quot;).get(2));</span>
<span class="nc" id="L298">        currencies.add(readfile.popularCurrency(&quot;src/main/resources/PopularCurrencies.csv&quot;).get(3));</span>

        ///
<span class="nc" id="L301">        int row_x = 150 - 20;</span>
<span class="nc" id="L302">        int row_y = 50 + 10;</span>

<span class="nc" id="L304">        Font firstTwo_font = Font.font(&quot;Arial&quot;, FontWeight.BOLD, 20);</span>

<span class="nc bnc" id="L306" title="All 2 branches missed.">        for (String s : currencies){</span>
<span class="nc" id="L307">            Text text = create_text(row_x,row_y,s,firstTwo_font,table_root,Color.GOLD);</span>
<span class="nc" id="L308">            row_x += 100;</span>
<span class="nc" id="L309">            table_root.getChildren().add(text);</span>
<span class="nc" id="L310">        }</span>

<span class="nc" id="L312">        row_x = 50 - 20;</span>
<span class="nc" id="L313">        row_y = 150 + 10;</span>

<span class="nc bnc" id="L315" title="All 2 branches missed.">        for (String s : currencies){</span>
<span class="nc" id="L316">            Text text = create_text(row_x,row_y,s,firstTwo_font,table_root,Color.GOLD);</span>
<span class="nc" id="L317">            row_y += 100;</span>
<span class="nc" id="L318">            table_root.getChildren().add(text);</span>
<span class="nc" id="L319">        }</span>

<span class="nc" id="L321">        int row_x0 = 13 ;</span>
<span class="nc" id="L322">        int row_y0 = 60 ;</span>
<span class="nc" id="L323">        Text text1 = create_text(row_x0,row_y0,&quot;From/to&quot;,firstTwo_font,table_root,Color.GOLD);</span>
<span class="nc" id="L324">        row_y0 += 100;</span>
<span class="nc" id="L325">        table_root.getChildren().add(text1);</span>

        // show all  the prices
<span class="nc" id="L328">        row_x = 130;</span>
<span class="nc" id="L329">        row_y = 160;</span>
<span class="nc" id="L330">        int row_x1 = 130;</span>
<span class="nc" id="L331">        int row_x2 = 130;</span>
<span class="nc" id="L332">        int row_x3 = 130;</span>
<span class="nc" id="L333">        int row_y1 = 260;</span>
<span class="nc" id="L334">        int row_y2 = 360;</span>
<span class="nc" id="L335">        int row_y3 = 460;</span>

<span class="nc" id="L337">        int i = 0;</span>

<span class="nc bnc" id="L339" title="All 2 branches missed.">        for (String d : currencies){</span>
<span class="nc" id="L340">            String t = readfile.fileInfor(&quot;src/main/resources/InitialExchangeRate.csv&quot;).get(currencies.get(0)).get(d);</span>

<span class="nc" id="L342">            Text text = create_text(row_x,row_y,t + arrow0[i],firstTwo_font,table_root,Color.GOLD);</span>
<span class="nc bnc" id="L343" title="All 2 branches missed.">            if (!t.equals(&quot;-&quot;)){</span>

<span class="nc bnc" id="L345" title="All 4 branches missed.">                if (Double.parseDouble(t) &gt; row0[i] &amp;&amp; row0[i] != 0.0 ){</span>
<span class="nc" id="L346">                    arrow0[i] = &quot;(I)&quot;;</span>
<span class="nc" id="L347">                    text.setText(t + arrow0[i]);</span>
<span class="nc bnc" id="L348" title="All 4 branches missed.">                }else if (Double.parseDouble(t) &lt; row0[i] &amp;&amp; row0[i] != 0.0){</span>
<span class="nc" id="L349">                    arrow0[i] = &quot;(D)&quot;;</span>
<span class="nc" id="L350">                    text.setText(t + &quot;(D)&quot;);</span>
                }
<span class="nc" id="L352">                row0[i] = Double.parseDouble(t);</span>
            }

<span class="nc" id="L355">            row_x += 100;</span>
<span class="nc" id="L356">            table_root.getChildren().add(text);</span>
<span class="nc" id="L357">            i++;</span>
<span class="nc" id="L358">        }</span>
<span class="nc" id="L359">        i = 0;</span>
<span class="nc bnc" id="L360" title="All 2 branches missed.">        for (String d : currencies){</span>
<span class="nc" id="L361">            String t = readfile.fileInfor(&quot;src/main/resources/InitialExchangeRate.csv&quot;).get(currencies.get(1)).get(d);</span>

<span class="nc" id="L363">            Text text = create_text(row_x1,row_y1,t + arrow1[i],firstTwo_font,table_root,Color.GOLD);</span>
<span class="nc" id="L364">            row_x1 += 100;</span>
<span class="nc bnc" id="L365" title="All 2 branches missed.">            if (!t.equals(&quot;-&quot;)){</span>

<span class="nc bnc" id="L367" title="All 4 branches missed.">                if (Double.parseDouble(t) &gt; row1[i] &amp;&amp; row1[i] != 0.0){</span>
<span class="nc" id="L368">                    arrow1[i] = &quot;(I)&quot;;</span>
<span class="nc" id="L369">                    text.setText(t + &quot;(I)&quot;);</span>
<span class="nc bnc" id="L370" title="All 4 branches missed.">                }else if (Double.parseDouble(t) &lt; row1[i] &amp;&amp; row1[i] != 0.0){</span>
<span class="nc" id="L371">                    arrow1[i] = &quot;(D)&quot;;</span>
<span class="nc" id="L372">                    text.setText(t + &quot;(D)&quot;);</span>
                }
<span class="nc" id="L374">                row1[i] = Double.parseDouble(t);</span>
            }

<span class="nc" id="L377">            table_root.getChildren().add(text);</span>
<span class="nc" id="L378">            i++;</span>
<span class="nc" id="L379">        }</span>
<span class="nc" id="L380">        i = 0;</span>
<span class="nc bnc" id="L381" title="All 2 branches missed.">        for (String d : currencies){</span>
<span class="nc" id="L382">            String t = readfile.fileInfor(&quot;src/main/resources/InitialExchangeRate.csv&quot;).get(currencies.get(2)).get(d);</span>

<span class="nc" id="L384">            Text text = create_text(row_x2,row_y2,t + arrow2[i],firstTwo_font,table_root,Color.GOLD);</span>
<span class="nc bnc" id="L385" title="All 2 branches missed.">            if (!t.equals(&quot;-&quot;)){</span>

<span class="nc bnc" id="L387" title="All 4 branches missed.">                if (Double.parseDouble(t) &gt; row2[i] &amp;&amp; row2[i] != 0.0){</span>
<span class="nc" id="L388">                    arrow2[i] = &quot;(I)&quot;;</span>
<span class="nc" id="L389">                    text.setText(t + &quot;(I)&quot;);</span>
<span class="nc bnc" id="L390" title="All 4 branches missed.">                }else if (Double.parseDouble(t) &lt; row2[i] &amp;&amp; row2[i] != 0.0){</span>
<span class="nc" id="L391">                    arrow2[i] = &quot;(D)&quot;;</span>
<span class="nc" id="L392">                    text.setText(t + &quot;(D)&quot;);</span>
                }
<span class="nc" id="L394">                row2[i] = Double.parseDouble(t);</span>
            }

<span class="nc" id="L397">            row_x2 += 100;</span>
<span class="nc" id="L398">            table_root.getChildren().add(text);</span>
<span class="nc" id="L399">            i++;</span>
<span class="nc" id="L400">        }</span>
<span class="nc" id="L401">        i = 0;</span>
<span class="nc bnc" id="L402" title="All 2 branches missed.">        for (String d : currencies){</span>
<span class="nc" id="L403">            String t = readfile.fileInfor(&quot;src/main/resources/InitialExchangeRate.csv&quot;).get(currencies.get(3)).get(d);</span>

<span class="nc" id="L405">            Text text = create_text(row_x3,row_y3,t + arrow0[i],firstTwo_font,table_root,Color.GOLD);</span>
<span class="nc" id="L406">            row_x3 += 100;</span>
<span class="nc bnc" id="L407" title="All 2 branches missed.">            if (!t.equals(&quot;-&quot;)){</span>

<span class="nc bnc" id="L409" title="All 4 branches missed.">                if (Double.parseDouble(t) &gt; row3[i] &amp;&amp; row3[i] != 0.0){</span>
<span class="nc" id="L410">                    arrow3[i] = &quot;(I)&quot;;</span>
<span class="nc" id="L411">                    text.setText(t + &quot;(I)&quot;);</span>
<span class="nc bnc" id="L412" title="All 4 branches missed.">                }else if (Double.parseDouble(t) &lt; row3[i] &amp;&amp; row3[i] != 0.0){</span>
<span class="nc" id="L413">                    arrow3[i] = &quot;(D)&quot;;</span>
<span class="nc" id="L414">                    text.setText(t + &quot;(D)&quot;);</span>
                }
<span class="nc" id="L416">                row3[i] = Double.parseDouble(t);</span>
            }

<span class="nc" id="L419">            table_root.getChildren().add(text);</span>
<span class="nc" id="L420">            i++;</span>
<span class="nc" id="L421">        }</span>
<span class="nc" id="L422">        table_stage.show();</span>
<span class="nc" id="L423">    }</span>

    public void invoke_history(){
<span class="nc" id="L426">        Group history_root = new Group();</span>
<span class="nc" id="L427">        Stage history_stage = new Stage();</span>
<span class="nc" id="L428">        Scene history_scene= new Scene(history_root, 500,500);</span>
<span class="nc" id="L429">        history_stage.setScene(history_scene);</span>
<span class="nc" id="L430">        history_stage.setResizable(false);</span>
<span class="nc" id="L431">        history_stage.setTitle(&quot;Rate History&quot;);</span>

<span class="nc" id="L433">        Image image =  new Image(&quot;file:update.jpg&quot;);</span>
<span class="nc" id="L434">        ImageView bg = new ImageView(image);</span>
<span class="nc" id="L435">        history_root.getChildren().add(bg);</span>

<span class="nc" id="L437">        ChoiceBox from_year = create_choicebox(10,100,80,25,history_root);</span>
<span class="nc" id="L438">        ChoiceBox from_mon = create_choicebox(100,100,50,25,history_root);</span>
<span class="nc" id="L439">        ChoiceBox from_day = create_choicebox(160,100,50,25,history_root);</span>

<span class="nc" id="L441">        ChoiceBox to_year = create_choicebox(290,100,80,25,history_root);</span>
<span class="nc" id="L442">        ChoiceBox to_mon = create_choicebox(380,100,50,25,history_root);</span>
<span class="nc" id="L443">        ChoiceBox to_day = create_choicebox(440,100,50,25,history_root);</span>

<span class="nc" id="L445">        Button find = create_button(80,30,225,150,&quot;Browse&quot;,null,null);</span>
<span class="nc" id="L446">        history_root.getChildren().add(find);</span>

<span class="nc" id="L448">        int year = 1970;</span>
<span class="nc bnc" id="L449" title="All 2 branches missed.">        while (year&lt;2023){</span>
<span class="nc" id="L450">            from_year.getItems().add(String.valueOf(year));</span>
<span class="nc" id="L451">            to_year.getItems().add(String.valueOf(year));</span>
<span class="nc" id="L452">            year++;</span>
        }
<span class="nc" id="L454">        int month = 1;</span>
<span class="nc bnc" id="L455" title="All 2 branches missed.">        while (month&lt;13){</span>
<span class="nc bnc" id="L456" title="All 2 branches missed.">            if (month&lt;10) {</span>
<span class="nc" id="L457">                from_mon.getItems().add(&quot;0&quot; + String.valueOf(month));</span>
<span class="nc" id="L458">                to_mon.getItems().add(&quot;0&quot; + String.valueOf(month));</span>
            }else{
<span class="nc" id="L460">                from_mon.getItems().add(String.valueOf(month));</span>
<span class="nc" id="L461">                to_mon.getItems().add(String.valueOf(month));</span>
            }

<span class="nc" id="L464">            month++;</span>
        }
<span class="nc" id="L466">        int day = 1;</span>
<span class="nc bnc" id="L467" title="All 2 branches missed.">        while (day&lt;32){</span>
<span class="nc bnc" id="L468" title="All 2 branches missed.">            if (day&lt;10) {</span>
<span class="nc" id="L469">                from_day.getItems().add(&quot;0&quot;+String.valueOf(day));</span>
<span class="nc" id="L470">                to_day.getItems().add(&quot;0&quot;+String.valueOf(day));</span>
            }else{
<span class="nc" id="L472">                from_day.getItems().add(String.valueOf(day));</span>
<span class="nc" id="L473">                to_day.getItems().add(String.valueOf(day));</span>
            }
<span class="nc" id="L475">            day++;</span>
        }

<span class="nc" id="L478">        from_year.setValue(&quot;YY&quot;);</span>
<span class="nc" id="L479">        from_mon.setValue(&quot;MM&quot;);</span>
<span class="nc" id="L480">        from_day.setValue(&quot;DD&quot;);</span>
<span class="nc" id="L481">        to_year.setValue(&quot;YY&quot;);</span>
<span class="nc" id="L482">        to_mon.setValue(&quot;MM&quot;);</span>
<span class="nc" id="L483">        to_day.setValue(&quot;DD&quot;);</span>

<span class="nc" id="L485">        ChoiceBox from_cur = create_choicebox(50,150,100,30,history_root);</span>
<span class="nc" id="L486">        ChoiceBox to_cur = create_choicebox(350,150,100,30,history_root);</span>

<span class="nc" id="L488">        Set curs = readfile.fileInfor(&quot;src/main/resources/InitialExchangeRate.csv&quot;).keySet();</span>

<span class="nc bnc" id="L490" title="All 2 branches missed.">        for (Object s: curs) {</span>
<span class="nc" id="L491">            from_cur.getItems().addAll((String) s);</span>
<span class="nc" id="L492">            to_cur.getItems().addAll((String) s);</span>
<span class="nc" id="L493">        }</span>

<span class="nc" id="L495">        Font firstTwo_font = Font.font(&quot;Arial&quot;, FontWeight.BOLD, 20);</span>
<span class="nc" id="L496">        Text ft = create_text(215,50,&quot;From/To&quot;,firstTwo_font,history_root,Color.GOLD);</span>
<span class="nc" id="L497">        Text ave_t = create_text(50,210,&quot;&quot;,firstTwo_font,history_root,Color.GOLD);</span>
<span class="nc" id="L498">        Text min_t = create_text(50,260,&quot;&quot;,firstTwo_font,history_root,Color.GOLD);</span>
<span class="nc" id="L499">        Text max_t = create_text(50,310,&quot;&quot;,firstTwo_font,history_root,Color.GOLD);</span>
<span class="nc" id="L500">        Text median_t = create_text(50,360,&quot;&quot;,firstTwo_font,history_root,Color.GOLD);</span>
<span class="nc" id="L501">        Text sd_t = create_text(50,410,&quot;&quot;,firstTwo_font,history_root,Color.GOLD);</span>
<span class="nc" id="L502">        Text rates_t = create_text(50,460,&quot;&quot;,firstTwo_font,history_root,Color.GOLD);</span>

<span class="nc" id="L504">        RateHistory rh = new RateHistory();</span>

<span class="nc" id="L506">        history_root.getChildren().addAll(ave_t,min_t,max_t,median_t,sd_t,rates_t,ft);</span>

<span class="nc" id="L508">        find.setOnAction(event -&gt; {</span>

<span class="nc" id="L510">            String start_date = from_year.getValue() +&quot;/&quot;+(String)from_mon.getValue()+&quot;/&quot;+(String)from_day.getValue();</span>
<span class="nc" id="L511">            String end_date = to_year.getValue() +&quot;/&quot;+(String)to_mon.getValue()+&quot;/&quot;+(String)to_mon.getValue();</span>

<span class="nc" id="L513">            String cur1 = (String) from_cur.getValue();</span>
<span class="nc" id="L514">            String cur2 = (String) to_cur.getValue() ;</span>
<span class="nc" id="L515">            double[] list = rh.doOperation(start_date,cur1,cur2,end_date);</span>
            //ave min max median sd
<span class="nc" id="L517">            double ave = list[0];</span>
<span class="nc" id="L518">            double min = list[1];</span>
<span class="nc" id="L519">            double max = list[2];</span>
<span class="nc" id="L520">            double median = list[3];</span>
<span class="nc" id="L521">            double sd = list[4];</span>
<span class="nc" id="L522">            ArrayList&lt;Double&gt; rates = rh.RateCalList;</span>

<span class="nc" id="L524">            String ave_s = &quot;Average: &quot;;</span>
<span class="nc" id="L525">            String min_s = &quot;Minimum: &quot;;</span>
<span class="nc" id="L526">            String max_s = &quot;Maximum: &quot;;</span>
<span class="nc" id="L527">            String median_s = &quot;Median: &quot;;</span>
<span class="nc" id="L528">            String sd_s = &quot;Standard deviation: &quot;;</span>
<span class="nc" id="L529">            String rates_s = &quot;Rates: &quot; ;</span>

<span class="nc" id="L531">            ave_s += String.valueOf(ave);</span>
<span class="nc" id="L532">            min_s += String.valueOf(min);</span>
<span class="nc" id="L533">            max_s += String.valueOf(max);</span>
<span class="nc" id="L534">            median_s += String.valueOf(median);</span>
<span class="nc" id="L535">            sd_s += String.valueOf(sd);</span>
<span class="nc" id="L536">            rates_s += rates.toString();</span>
            //rates_t += String.valueOf(list);
<span class="nc" id="L538">            ave_t.setText(ave_s);</span>
<span class="nc" id="L539">            min_t.setText(min_s);</span>
<span class="nc" id="L540">            max_t.setText(max_s);</span>
<span class="nc" id="L541">            median_t.setText(median_s);</span>
<span class="nc" id="L542">            sd_t.setText(sd_s);</span>
<span class="nc" id="L543">            rates_t.setText(rates_s);</span>
<span class="nc" id="L544">        });</span>

<span class="nc" id="L546">        Alert date_alert = new Alert(Alert.AlertType.ERROR);</span>
<span class="nc" id="L547">        boolean pass = false;</span>
<span class="nc bnc" id="L548" title="All 2 branches missed.">        if (!pass){</span>
<span class="nc" id="L549">            date_alert.setContentText(&quot;Invalid input of time!&quot;);</span>
            //date_alert.show();
        }

<span class="nc" id="L553">        history_stage.show();</span>
<span class="nc" id="L554">    }</span>

    public String edit_hint_message(String selected){
<span class="nc" id="L557">        String s = &quot;Please input exchange rate for other currencies in sequence: \n&quot;;</span>
<span class="nc" id="L558">        ArrayList&lt;String&gt; curs = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L559" title="All 2 branches missed.">        for (int i = 1; i&lt; date_curs.size();i++){</span>
<span class="nc" id="L560">            curs.add(date_curs.get(i));</span>
        }//KEYSET() WILL SORT THE LIST OF KEYS, SOMEHOW :)
<span class="nc bnc" id="L562" title="All 2 branches missed.">        for (String key: curs){</span>
<span class="nc" id="L563">            s += &quot; &quot;;</span>
<span class="nc bnc" id="L564" title="All 2 branches missed.">            if (!key.equals(selected))</span>
<span class="nc" id="L565">                s += key;</span>
<span class="nc" id="L566">        }</span>
<span class="nc" id="L567">        s += &quot;\n&quot;;</span>
<span class="nc" id="L568">        s += &quot;(Seperate by one space)&quot;;</span>
<span class="nc" id="L569">        return s;</span>
    }
    public String add_hint_message(){
<span class="nc" id="L572">        String s = &quot;Please input exchange rate for other currencies in sequence: \n&quot;;</span>
<span class="nc" id="L573">        ArrayList&lt;String&gt; curs = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L574" title="All 2 branches missed.">        for (int i = 1; i&lt; date_curs.size();i++){</span>
<span class="nc" id="L575">            curs.add(date_curs.get(i));</span>
        }//KEYSET() WILL SORT THE LIST OF KEYS, SOMEHOW :)
<span class="nc bnc" id="L577" title="All 2 branches missed.">        for (String key: curs){</span>
<span class="nc" id="L578">            s += &quot; &quot;;</span>
<span class="nc" id="L579">            s += key;</span>
<span class="nc" id="L580">        }</span>
<span class="nc" id="L581">        s += &quot;\n&quot;;</span>
<span class="nc" id="L582">        s += &quot;(Seperate by one space)&quot;;</span>
<span class="nc" id="L583">        return s;</span>
    }
    public void invoke_update(){
<span class="nc" id="L586">        Group update_root = new Group();</span>
<span class="nc" id="L587">        Stage update_stage = new Stage();</span>
<span class="nc" id="L588">        Scene update_scene= new Scene(update_root, 500,500);</span>
<span class="nc" id="L589">        update_stage.setScene(update_scene);</span>
<span class="nc" id="L590">        update_stage.setResizable(false);</span>
<span class="nc" id="L591">        update_stage.setTitle(&quot;Update currencies&quot;);</span>

<span class="nc" id="L593">        Image image =  new Image(&quot;file:update.jpg&quot;);</span>
<span class="nc" id="L594">        ImageView bg = new ImageView(image);</span>
<span class="nc" id="L595">        update_root.getChildren().add(bg);</span>

<span class="nc" id="L597">        Font small = Font.font(&quot;Arial&quot;, FontWeight.BOLD, 15);</span>

        // edit area
<span class="nc" id="L600">        RadioButton edit = create_radiobutton(50,100,&quot;Edit&quot;,small,Color.GOLD);</span>
<span class="nc" id="L601">        RadioButton add = create_radiobutton(50,153*2-25,&quot;Add&quot;,small,Color.GOLD);</span>
        //RadioButton del = create_radiobutton(50,133*3-25,&quot;Delete&quot;,small,Color.GOLD);

<span class="nc" id="L604">        ToggleGroup group = new ToggleGroup();</span>
<span class="nc" id="L605">        edit.setToggleGroup(group);</span>
<span class="nc" id="L606">        add.setToggleGroup(group);</span>
        //del.setToggleGroup(group);

<span class="nc" id="L609">        TextField edit_date = create_textfield(150,100,100,25,null,update_root);</span>
<span class="nc" id="L610">        edit_date.setPromptText(&quot;Enter Date&quot;);</span>
<span class="nc" id="L611">        edit_date.getParent().requestFocus();</span>
<span class="nc" id="L612">        ChoiceBox edit_cur = create_choicebox(280,100,100,25,update_root);</span>
<span class="nc" id="L613">        TextField edit_num = create_textfield(150,143+60,300,25,null,update_root);</span>
<span class="nc" id="L614">        edit_num.setMinWidth(300);</span>
<span class="nc" id="L615">        Button edit_but = create_button(50,25,410,100,&quot;Save&quot;,null,null);</span>

<span class="nc" id="L617">        Set list = readfile.fileInfor(&quot;src/main/resources/InitialExchangeRate.csv&quot;).keySet();</span>
<span class="nc bnc" id="L618" title="All 2 branches missed.">        for (Object s: list)</span>
<span class="nc" id="L619">            edit_cur.getItems().addAll((String) s);</span>

<span class="nc" id="L621">        update_root.getChildren().add(edit_but);</span>
<span class="nc" id="L622">        update_root.getChildren().addAll(edit,add);</span>
<span class="nc" id="L623">        edit_date.setDisable(true);</span>
<span class="nc" id="L624">        edit_cur.setDisable(true);</span>
<span class="nc" id="L625">        edit_num.setDisable(true);</span>
<span class="nc" id="L626">        edit_but.setDisable(true);</span>

        //ADD
<span class="nc" id="L629">        TextField add_date = create_textfield(150,153*2-28,100,25,null,update_root);</span>
<span class="nc" id="L630">        add_date.setPromptText(&quot;Enter Date&quot;);</span>
<span class="nc" id="L631">        add_date.getParent().requestFocus();</span>
<span class="nc" id="L632">        TextField add_cur = create_textfield(280,153*2-28,100,25,null,update_root);</span>
<span class="nc" id="L633">        add_cur.setPromptText(&quot;Enter Currency&quot;);</span>
<span class="nc" id="L634">        add_cur.getParent().requestFocus();</span>
<span class="nc" id="L635">        TextField add_value = create_textfield(150,153*2-28+100,300,25,null,update_root);</span>
<span class="nc" id="L636">        add_value.setMinWidth(300);</span>
<span class="nc" id="L637">        Button add_but = create_button(50,25,410,153*2-28,&quot;Add&quot;,null,null);</span>


<span class="nc" id="L640">        Text hint0 = new Text(&quot;&quot;);</span>
<span class="nc" id="L641">        hint0.setFill(Color.YELLOW);</span>
<span class="nc" id="L642">        hint0.setX(150);</span>
<span class="nc" id="L643">        hint0.setY(150);</span>
<span class="nc" id="L644">        update_root.getChildren().add(hint0);</span>
        //Edit choice box small event
<span class="nc" id="L646">        edit_cur.setOnAction(event -&gt; {</span>
<span class="nc" id="L647">            String s0 = edit_hint_message((String) edit_cur.getValue());</span>
<span class="nc" id="L648">            hint0.setText(s0);</span>
<span class="nc" id="L649">        });</span>

        // ADD HINTS
<span class="nc" id="L652">        String s = add_hint_message();</span>
<span class="nc" id="L653">        Text hint = new Text();</span>
<span class="nc" id="L654">        hint.setText(s);</span>
<span class="nc" id="L655">        hint.setFill(Color.YELLOW);</span>
<span class="nc" id="L656">        hint.setX(150);</span>
<span class="nc" id="L657">        hint.setY(153*2-28+50+5);</span>
<span class="nc" id="L658">        update_root.getChildren().add(hint);</span>

        //basic settings
<span class="nc" id="L661">        update_root.getChildren().add(add_but);</span>
<span class="nc" id="L662">        add_value.setDisable(true);</span>
<span class="nc" id="L663">        add_date.setDisable(true);</span>
<span class="nc" id="L664">        add_but.setDisable(true);</span>
<span class="nc" id="L665">        add_cur.setDisable(true);</span>
        //DEL
        /*
        ChoiceBox del_cur = create_choicebox(150,133*3-28,100,25,update_root);
        Button del_but = create_button(70,25,280,133*3-28,&quot;Delete&quot;,null,null);
        update_root.getChildren().add(del_but);
        del_cur.setDisable(true);
        del_but.setDisable(true);
        */
        //events
<span class="nc" id="L675">        edit.setOnAction(event -&gt; {</span>
<span class="nc" id="L676">            edit_cur.setDisable(false);</span>
<span class="nc" id="L677">            edit_num.setDisable(false);</span>
<span class="nc" id="L678">            edit_but.setDisable(false);</span>
<span class="nc" id="L679">            edit_date.setDisable(false);</span>
            //del_cur.setDisable(true);
            //del_but.setDisable(true);

<span class="nc" id="L683">            add_but.setDisable(true);</span>
<span class="nc" id="L684">            add_date.setDisable(true);</span>
<span class="nc" id="L685">            add_cur.setDisable(true);</span>
<span class="nc" id="L686">            add_value.setDisable(true);</span>

<span class="nc" id="L688">        });</span>
        /*
        del.setOnAction(event -&gt; {
            edit_cur.setDisable(true);
            edit_num.setDisable(true);
            edit_but.setDisable(true);

            //del_cur.setDisable(false);
            //del_but.setDisable(false);

            add_but.setDisable(true);
            add_date.setDisable(true);
            add_cur.setDisable(true);
            add_value.setDisable(true);

        });
        */

<span class="nc" id="L706">        add.setOnAction(event -&gt; {</span>
<span class="nc" id="L707">            edit_cur.setDisable(true);</span>
<span class="nc" id="L708">            edit_num.setDisable(true);</span>
<span class="nc" id="L709">            edit_but.setDisable(true);</span>
<span class="nc" id="L710">            edit_date.setDisable(true);</span>
            //del_cur.setDisable(true);
            //del_but.setDisable(true);

<span class="nc" id="L714">            add_but.setDisable(false);</span>
<span class="nc" id="L715">            add_date.setDisable(false);</span>
<span class="nc" id="L716">            add_cur.setDisable(false);</span>
<span class="nc" id="L717">            add_value.setDisable(false);</span>

<span class="nc" id="L719">        });</span>
        //EDIT FUNCTION
<span class="nc" id="L721">        edit_but.setOnAction(event -&gt;{</span>
<span class="nc" id="L722">            rw.setCurcList(date_curs);//date,cur1,cur2......</span>
<span class="nc" id="L723">            rw.setRateCurc(cur_values);//cur1 = value... cur2 = value...</span>

<span class="nc" id="L725">            ArrayList&lt;String&gt; values = new ArrayList&lt;&gt;(Arrays.asList(edit_num.getText().split(&quot; &quot;)));</span>

<span class="nc bnc" id="L727" title="All 2 branches missed.">            if (values.size() != cur_values.keySet().size()-1) {</span>
<span class="nc" id="L728">                a.setAlertType(Alert.AlertType.ERROR);</span>
<span class="nc" id="L729">                a.setContentText(alert_add);</span>
<span class="nc" id="L730">                a.show();</span>
<span class="nc bnc" id="L731" title="All 2 branches missed.">            }else if (edit_date.getText().split(&quot;/&quot;).length != 3){</span>
<span class="nc" id="L732">                a.setAlertType(Alert.AlertType.ERROR);</span>
<span class="nc" id="L733">                a.setContentText(&quot;Please input data as YY/MM/DD&quot;);</span>
<span class="nc" id="L734">                a.show();</span>

            }else{
<span class="nc" id="L737">                boolean isnew = true;</span>
<span class="nc bnc" id="L738" title="All 2 branches missed.">                if(edit_date.getText().equals(date_curs.get(0)))</span>
<span class="nc" id="L739">                    isnew = false;</span>

<span class="nc" id="L741">                ArrayList&lt;String&gt; curs = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L742" title="All 2 branches missed.">                for (int i = 1; i&lt; date_curs.size();i++)</span>
<span class="nc" id="L743">                    curs.add(date_curs.get(i));</span>

<span class="nc" id="L745">                int index_selected = curs.indexOf(edit_cur.getValue());//index of selected currency</span>
<span class="nc" id="L746">                values.add(index_selected,&quot;-&quot;);// FILL ITS PLACE WITH NOTHING</span>
<span class="nc" id="L747">                int index = curs.indexOf(edit_cur.getValue());</span>
<span class="nc" id="L748">                int i = 0;</span>

<span class="nc bnc" id="L750" title="All 2 branches missed.">                for (ArrayList&lt;String&gt; strings : cur_values.values()){</span>
<span class="nc" id="L751">                    strings.set(index, values.get(i));</span>
<span class="nc" id="L752">                    i++;</span>
<span class="nc" id="L753">                }</span>


<span class="nc" id="L756">                rw.setCurcList(date_curs);</span>
<span class="nc" id="L757">                rw.setRateCurc(cur_values);</span>
<span class="nc" id="L758">                rw.rateEditer((String) edit_cur.getValue(),values,edit_date.getText());</span>

<span class="nc" id="L760">                Alert success = new Alert(Alert.AlertType.INFORMATION);</span>
<span class="nc" id="L761">                success.setContentText(&quot;Success!&quot;);</span>
<span class="nc" id="L762">                success.show();</span>
<span class="nc" id="L763">                String s2 = add_hint_message();</span>
<span class="nc" id="L764">                hint.setText(s2);</span>
            }


<span class="nc" id="L768">        });</span>
        //ADD FUNCTION
<span class="nc" id="L770">        add_but.setOnAction(event -&gt; {</span>
<span class="nc" id="L771">            String cur = add_cur.getText();</span>
<span class="nc" id="L772">            String new_date = add_date.getText();</span>
<span class="nc" id="L773">            String new_values = add_value.getText();</span>

<span class="nc" id="L775">            ArrayList&lt;String&gt; values = new ArrayList&lt;&gt;(Arrays.asList(new_values.split(&quot; &quot;)));</span>

<span class="nc bnc" id="L777" title="All 2 branches missed.">            if (values.size() != cur_values.keySet().size()){</span>
<span class="nc" id="L778">                a.setAlertType(Alert.AlertType.ERROR);</span>
<span class="nc" id="L779">                a.setContentText(alert_add);</span>
<span class="nc" id="L780">                a.show();</span>
<span class="nc bnc" id="L781" title="All 2 branches missed.">            }else if (add_date.getText().split(&quot;/&quot;).length != 3){</span>
<span class="nc" id="L782">                a.setAlertType(Alert.AlertType.ERROR);</span>
<span class="nc" id="L783">                a.setContentText(&quot;Please input data as YY/MM/DD&quot;);</span>
<span class="nc" id="L784">                a.show();</span>
            }else{
<span class="nc" id="L786">                values.add(&quot;- &quot;);</span>
<span class="nc" id="L787">                date_curs.set(0,new_date);//update date</span>
<span class="nc" id="L788">                date_curs.add(cur);//add a column for the new currency</span>
<span class="nc" id="L789">                cur_values.put(cur,values);</span>
<span class="nc" id="L790">                System.out.println(cur_values);</span>
<span class="nc" id="L791">                int k = 0;</span>
<span class="nc bnc" id="L792" title="All 2 branches missed.">                for (int i = 1; i &lt; date_curs.size()-1;i++){</span>
<span class="nc" id="L793">                    ArrayList&lt;String&gt; r = cur_values.get(date_curs.get(i));</span>
<span class="nc" id="L794">                    double goal = 1/Double.parseDouble(values.get(k));</span>

<span class="nc" id="L796">                    r.add(String.format(&quot;%.2f&quot;,goal));</span>
<span class="nc" id="L797">                    cur_values.put(date_curs.get(i), r);</span>
<span class="nc" id="L798">                    System.out.println(r);</span>
<span class="nc" id="L799">                    k++;</span>
                }

<span class="nc" id="L802">                rw.setCurcList(date_curs);//date,cur1,cur2......</span>
<span class="nc" id="L803">                rw.setRateCurc(cur_values);//cur1 = value... cur2 = value...</span>

                try {
                    //rw.rateEditer(cur,values,new_date,true);
<span class="nc" id="L807">                    rw.rateWriter();</span>
<span class="nc" id="L808">                    cb.getItems().add(cur);</span>
<span class="nc" id="L809">                    cb2.getItems().add(cur);</span>
<span class="nc" id="L810">                    edit_cur.getItems().add(cur);</span>
<span class="nc" id="L811">                    Alert success = new Alert(Alert.AlertType.INFORMATION);</span>
<span class="nc" id="L812">                    success.setContentText(&quot;Success!&quot;);</span>
<span class="nc" id="L813">                    success.show();</span>
<span class="nc" id="L814">                    String s2 = add_hint_message();</span>
<span class="nc" id="L815">                    hint.setText(s2);</span>


<span class="nc" id="L818">                } catch (Exception e) {</span>
<span class="nc" id="L819">                    throw new RuntimeException(e);</span>
<span class="nc" id="L820">                }</span>
            }
<span class="nc" id="L822">        });</span>

<span class="nc" id="L824">        update_stage.show();</span>
<span class="nc" id="L825">    }</span>
    public void invoke_update1(){
<span class="nc" id="L827">        Group update_root = new Group();</span>
<span class="nc" id="L828">        Stage update_stage = new Stage();</span>
<span class="nc" id="L829">        Scene update_scene= new Scene(update_root, 500,500);</span>
<span class="nc" id="L830">        update_stage.setScene(update_scene);</span>
<span class="nc" id="L831">        update_stage.setResizable(false);</span>
<span class="nc" id="L832">        update_stage.setTitle(&quot;Set Popular currencies&quot;);</span>
<span class="nc" id="L833">        Image image =  new Image(&quot;file:update.jpg&quot;);</span>
<span class="nc" id="L834">        ImageView bg = new ImageView(image);</span>
<span class="nc" id="L835">        update_root.getChildren().add(bg);</span>
<span class="nc" id="L836">        Font small = Font.font(&quot;Arial&quot;, FontWeight.BOLD, 15);</span>

        // edit area
<span class="nc" id="L839">        RadioButton edit = create_radiobutton(50,100,&quot;Set&quot;,small,Color.GOLD);</span>

<span class="nc" id="L841">        ToggleGroup group = new ToggleGroup();</span>
<span class="nc" id="L842">        edit.setToggleGroup(group);</span>

<span class="nc" id="L844">        ChoiceBox edit_cur1 = create_choicebox(270,100,20,25,update_root);</span>
<span class="nc" id="L845">        ChoiceBox edit_cur2 = create_choicebox(200,100,20,25,update_root);</span>
<span class="nc" id="L846">        ChoiceBox edit_cur3 = create_choicebox(130,100,20,25,update_root);</span>
<span class="nc" id="L847">        ChoiceBox edit_cur = create_choicebox(340,100,20,25,update_root);</span>


<span class="nc" id="L850">        Button edit_but = create_button(50,25,410,100,&quot;Save&quot;,null,null);</span>

<span class="nc" id="L852">        Set list = readfile.fileInfor(&quot;src/main/resources/InitialExchangeRate.csv&quot;).keySet();</span>

<span class="nc bnc" id="L854" title="All 2 branches missed.">        for (Object s: list)</span>
<span class="nc" id="L855">            edit_cur.getItems().addAll((String) s);</span>
<span class="nc bnc" id="L856" title="All 2 branches missed.">        for (Object s: list)</span>
<span class="nc" id="L857">            edit_cur1.getItems().addAll((String) s);</span>
<span class="nc bnc" id="L858" title="All 2 branches missed.">        for (Object s: list)</span>
<span class="nc" id="L859">            edit_cur2.getItems().addAll((String) s);</span>
<span class="nc bnc" id="L860" title="All 2 branches missed.">        for (Object s: list)</span>
<span class="nc" id="L861">            edit_cur3.getItems().addAll((String) s);</span>

<span class="nc" id="L863">        update_root.getChildren().add(edit_but);</span>
<span class="nc" id="L864">        update_root.getChildren().addAll(edit);</span>

<span class="nc" id="L866">        edit_cur.setDisable(true);</span>
<span class="nc" id="L867">        edit_cur1.setDisable(true);</span>
<span class="nc" id="L868">        edit_cur2.setDisable(true);</span>
<span class="nc" id="L869">        edit_cur3.setDisable(true);</span>
<span class="nc" id="L870">        edit_but.setDisable(true);</span>

<span class="nc" id="L872">        Text hint0 = new Text(&quot;&quot;);</span>
<span class="nc" id="L873">        hint0.setFill(Color.YELLOW);</span>
<span class="nc" id="L874">        hint0.setX(150);</span>
<span class="nc" id="L875">        hint0.setY(150);</span>
<span class="nc" id="L876">        update_root.getChildren().add(hint0);</span>

        //basic settings
<span class="nc" id="L879">        edit.setOnAction(event -&gt; {</span>
<span class="nc" id="L880">            edit_cur.setDisable(false);</span>
<span class="nc" id="L881">            edit_cur1.setDisable(false);</span>
<span class="nc" id="L882">            edit_cur2.setDisable(false);</span>
<span class="nc" id="L883">            edit_cur3.setDisable(false);</span>
<span class="nc" id="L884">            edit_but.setDisable(false);</span>

<span class="nc" id="L886">        });</span>
        //EDIT FUNCTION
<span class="nc" id="L888">        edit_but.setOnAction(event -&gt;{</span>
<span class="nc" id="L889">            ArrayList&lt;String&gt; ar = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L890">            ar.add((String) edit_cur1.getValue());</span>
<span class="nc" id="L891">            ar.add((String) edit_cur2.getValue());</span>
<span class="nc" id="L892">            ar.add((String) edit_cur3.getValue());</span>
<span class="nc" id="L893">            ar.add((String) edit_cur.getValue());</span>
<span class="nc" id="L894">            PopCWriter pc = new PopCWriter();</span>
            try {
<span class="nc" id="L896">                pc.PopWriter(ar);</span>
<span class="nc" id="L897">            } catch (Exception e) {</span>
<span class="nc" id="L898">                throw new RuntimeException(e);</span>
<span class="nc" id="L899">            }</span>
<span class="nc" id="L900">        });</span>
<span class="nc" id="L901">        update_stage.show();</span>
<span class="nc" id="L902">    }</span>


    public static void main(String[] args) {
<span class="nc" id="L906">        launch(args);</span>

<span class="nc" id="L908">    }</span>


}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>